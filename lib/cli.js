// Generated by CoffeeScript 1.5.0

/*
 AssemBot CLI!
*/


(function() {
  var assbot, defaults, path, _;

  path = require('path');

  _ = require('./util');

  assbot = require('./builder');

  defaults = require('./defaults');

  module.exports = {
    run: function() {
      var assbot_conf, assembot_info, empty, nfo, options, project_root;
      project_root = process.cwd();
      options = {};
      options = _.defaults(options, defaults.options);
      assembot_info = require('../package');
      nfo = (function() {
        try {
          return require("" + project_root + path.sep + "package");
        } catch (ex) {
          console.log("No 'package.json' file found, using defaults!");
          return empty = {
            assembot: defaults.assembot
          };
        }
      })();
      assbot_conf = nfo.assembot == null ? (console.log("No 'assembot' block in your package.json file found, using defaults!"), defaults.assembot) : nfo.assembot;
      assbot_conf["package"] = nfo;
      assbot_conf.assembot = assembot_info;
      return assbot.build(assbot_conf, options);
    }
  };

}).call(this);
