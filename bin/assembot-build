#!/usr/bin/env coffee

cli= require 'commander'
pkg= require '../package'
{assembot, _, loadTargets}= require '../lib/assembot'
log= require '../lib/assembot/log'
# {puts, pp}= _

cli
  .version(pkg.version)
  .option('-v, --verbose', 'force installation')
  .option('-q, --quiet', 'force installation')
  .parse(process.argv);

log.level 0 if cli.quiet
log.level 2 if cli.verbose

log.info ''
log.info "Building..."

for target, options of loadTargets()
  log.info "Target:", target
  log.debug "Configuration:"
  log.debug options
  bot= assembot target, options
  bot.build() #(err, content)->
    # log.info "RETURNED"
    # log.info content
  log.debug ''
  

# # pp bot

# bot.build 'js', (err, content)->
#   puts "Built!"
#   # pp content
#   pp bot





# // var pkgs = program.args;

# // if (!pkgs.length) {
# //   console.error('packages required');
# //   process.exit(1);
# // }

# // console.log();
# // if (program.force) console.log('  force: install');
# // pkgs.forEach(function(pkg){
# //   console.log('  install : %s', pkg);
# // });
# // console.log();